<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz Ceifador ðŸ’€ â€“ DimensÃ£o do Terror</title>
  <meta name="description" content="Quiz de terror: escolha tema e nÃºmero de perguntas (10-20). Teste se sua alma sobrevive!">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’€</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Special+Elite&display=swap" rel="stylesheet">
  
  <style>
    body {
      background: #000 url('https://images.unsplash.com/photo-1507499739999-097706ad8914?auto=format&fit=crop&q=80') center/cover fixed;
      color: #ffcccc;
      font-family: 'Special Elite', cursive;
      margin: 0; padding: 0;
      overflow: hidden;
      min-height: 100vh;
      position: relative;
    }
    body::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(rgba(0,0,0,0.8), rgba(80,0,0,0.4));
      animation: pulse 15s infinite alternate;
    }
    @keyframes pulse { 0% { opacity: 0.5; } 100% { opacity: 0.85; } }
    
    .container {
      position: relative;
      z-index: 2;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      text-align: center;
    }
    
    h1 {
      font-family: 'Creepster', cursive;
      font-size: clamp(4rem, 14vw, 10rem);
      color: #ff1a1a;
      text-shadow: 0 0 30px #8b0000;
      margin-bottom: 1.5rem;
      animation: glitch 6s infinite;
    }
    @keyframes glitch {
      0%,100% { transform: translate(0); }
      20% { transform: translate(-5px,5px); }
      40% { transform: translate(5px,-5px); }
    }
    
    input, select, button {
      width: 100%;
      max-width: 450px;
      padding: 1.2rem;
      margin: 1rem 0;
      font-size: 1.3rem;
      background: rgba(30,0,0,0.7);
      border: 2px solid #8b0000;
      color: #ffcccc;
      border-radius: 10px;
      font-family: inherit;
    }
    button {
      background: linear-gradient(45deg, #4b0000, #8b0000);
      cursor: pointer;
      border: none;
    }
    button:hover {
      transform: scale(1.08);
      box-shadow: 0 0 40px #ff0000;
    }
    
    .option {
      padding: 1.2rem;
      background: rgba(40,0,0,0.8);
      border: 2px solid #8b0000;
      margin: 0.8rem 0;
      cursor: pointer;
      border-radius: 8px;
    }
    .option:hover {
      border-color: #ff1a1a;
      box-shadow: 0 0 20px #ff1a1a80;
    }
    
    #balloon {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(139,0,0,0.95);
      color: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 0 50px #ff0000;
      display: none;
      z-index: 10;
      max-width: 90%;
      text-align: center;
    }
    
    #ranking ol {
      counter-reset: rank;
      list-style: none;
      padding: 0;
    }
    #ranking li::before {
      content: counter(rank) "Âº â€“ ";
      counter-increment: rank;
      color: #ff1a1a;
      font-weight: bold;
      font-size: 1.6rem;
    }
    
    #mute-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: #ffcccc;
      font-size: 2.5rem;
      cursor: pointer;
    }
    
    .ceifador {
      position: absolute;
      font-size: 12rem;
      opacity: 0.1;
      pointer-events: none;
      animation: float 35s infinite linear;
    }
    .ceifador:nth-child(1) { top: 5%; left: 5%; }
    .ceifador:nth-child(2) { bottom: 10%; right: 5%; animation-direction: reverse; }
    
    @keyframes float {
      0%,100% { transform: translate(0,0); }
      50% { transform: translate(150px, -120px); }
    }
  </style>
</head>
<body>

  <div class="container" id="landing">
    <h1>Quiz Ceifador ðŸ’€</h1>
    
    <input type="text" id="nome" placeholder="Nome opcional â€“ Ranking das Almas Ceifadas" maxlength="30">
    
    <select id="tema">
      <option value="filmes">Filmes de Terror</option>
      <option value="lendas">Lendas Urbanas</option>
      <option value="creepypasta">Creepypastas</option>
      <option value="misto">Misto (Tudo!)</option>
    </select>
    
    <label for="qtd">Quantas perguntas vocÃª quer responder?</label>
    <select id="qtd">
      <option value="10">10 perguntas</option>
      <option value="12">12 perguntas</option>
      <option value="15" selected>15 perguntas (padrÃ£o)</option>
      <option value="18">18 perguntas</option>
      <option value="20">20 perguntas</option>
    </select>
    
    <button onclick="iniciarQuiz()">Entrar no Abismo</button>
  </div>

  <div class="container" id="quiz-section">
    <h1 id="quiz-title"></h1>
    <div id="pergunta" style="font-size:1.8rem; margin:1.5rem 0;"></div>
    <div id="opcoes"></div>
    <div id="score" style="font-size:1.5rem; margin:1rem 0;">Almas Ceifadas: 0</div>
    <div id="error-msg" style="color:#ffcccc; display:none; font-size:1.3rem;">Errado! Sua alma treme...</div>
  </div>

  <div class="container" id="end-section">
    <h1>Fim da CeifanÃ§a ðŸ’€</h1>
    <div id="resultado" style="font-size:1.6rem; margin:1.5rem 0;"></div>
    <div id="ranking"></div>
    <button onclick="compartilharResultado()">Compartilhar Minha CeifanÃ§a</button>
    <button onclick="reiniciar()">Tentar Novamente</button>
  </div>

  <div id="balloon">
    <p id="balloon-text"></p>
    <button onclick="document.getElementById('balloon').style.display='none'">Fechar</button>
  </div>

  <button id="mute-btn" onclick="toggleMute()">ðŸ”Š</button>

  <div class="ceifador">ðŸ’€</div>
  <div class="ceifador">ðŸª¦</div>

  <script>
    // Sons
    const bgSound = new Audio('https://freesound.org/data/previews/243/243020_1774763-lq.mp3');
    bgSound.loop = true; bgSound.volume = 0.25;
    
    const correctSound = new Audio('https://freesound.org/data/previews/397/397355_7033107-lq.mp3');
    correctSound.volume = 0.4;
    
    const errorSound = new Audio('https://freesound.org/data/previews/571/571501_1172916-lq.mp3');
    errorSound.volume = 0.4;

    let muted = false;
    function toggleMute() {
      muted = !muted;
      document.getElementById('mute-btn').textContent = muted ? 'ðŸ”‡' : 'ðŸ”Š';
      if (muted) bgSound.pause(); else bgSound.play().catch(e=>console.log("Som bloqueado:",e));
    }

    // Perguntas completas (15 por categoria)
    const perguntas = {
      filmes: [
        { pergunta: "Quem possui a garota do exorcista?", opcoes: ["A) Pazuzu", "B) Embora", "C) Cairne", "D) Belzebu"], resposta: "A) Pazuzu", explicacao: "Pazuzu Ã© o demÃ´nio antigo que possui Regan em O Exorcista." },
        { pergunta: "Qual filme de 1973 marcou o subgÃªnero de possessÃ£o?", opcoes: ["A) O pressagio", "B) BebÃª de Rosemary", "C) O Exorcista", "D) Amityville"], resposta: "C) O Exorcista", explicacao: "O Exorcista Ã© o clÃ¡ssico que definiu possessÃ£o demonÃ­aca no cinema." },
        { pergunta: "Qual filme apresenta a boneca Annabelle?", opcoes: ["A) A ConjuraÃ§Ã£o", "B) Annabelle", "C) Insidioso", "D) A Freira"], resposta: "B) Annabelle", explicacao: "Annabelle Ã© a boneca possuÃ­da da franquia Conjuring." },
        { pergunta: "No filme Insidioso, qual Ã© o demÃ´nio com cara de batom?", opcoes: ["A) Pazuzu", "B) O DemÃ´nio com Cara de Batom", "C) Kandariano", "D) Belzebu"], resposta: "B) O DemÃ´nio com Cara de Batom", explicacao: "Conhecido como Lipstick-Face Demon." },
        { pergunta: "Qual filme introduziu zumbis rÃ¡pidos?", opcoes: ["A) World War Z", "B) 28 Days Later", "C) Zombieland", "D) Train to Busan"], resposta: "B) 28 Days Later", explicacao: "28 Days Later popularizou zumbis Ã¡geis e infectados." },
        { pergunta: "Qual Ã© a regra nÃºmero um em Zombieland?", opcoes: ["A) Double Tap", "B) Cardio", "C) Cuidado com banheiros", "D) NÃ£o seja herÃ³i"], resposta: "B) Cardio", explicacao: "Manter-se em forma para correr dos zumbis." },
        { pergunta: "Qual empresa causa o apocalipse zumbi em Resident Evil?", opcoes: ["A) Umbrella Corporation", "B) LexCorp", "C) Cyberdyne", "D) Virtucon"], resposta: "A) Umbrella Corporation", explicacao: "A Umbrella liberou o vÃ­rus T." },
        { pergunta: "Qual vÃ­rus transforma pessoas em zumbis em World War Z?", opcoes: ["A) Solanum", "B) T-Virus", "C) Rage Virus", "D) Rabies"], resposta: "A) Solanum", explicacao: "Nome do vÃ­rus no livro e filme." },
        { pergunta: "Qual filme de 1968 Ã© considerado o marco dos zumbis modernos?", opcoes: ["A) Noite dos Mortos-Vivos", "B) White Zombie", "C) Dawn of the Dead", "D) Re-Animator"], resposta: "A) Noite dos Mortos-Vivos", explicacao: "Obra de George Romero." },
        { pergunta: "Em qual filme Russel Crowe interpreta um exorcista?", opcoes: ["A) O Exorcista do Papa", "B) Constantine", "C) O Exorcismo de Emily Rose", "D) A Freira"], resposta: "A) O Exorcista do Papa", explicacao: "Baseado nas histÃ³rias reais do Padre Amorth." },
        { pergunta: "Qual filme NÃƒO envolve possessÃ£o demonÃ­aca?", opcoes: ["A) Cloverfield", "B) O Exorcista", "C) Insidioso", "D) A ConjuraÃ§Ã£o"], resposta: "A) Cloverfield", explicacao: "Cloverfield Ã© sobre um monstro gigante." },
        { pergunta: "Qual Ã© o nome do demÃ´nio em O Exorcista?", opcoes: ["A) Pazuzu", "B) LÃºcifer", "C) Asmodeus", "D) Belial"], resposta: "A) Pazuzu", explicacao: "DemÃ´nio mesopotÃ¢mico." },
        { pergunta: "Qual filme tem a cena de possessÃ£o mais longa?", opcoes: ["A) O Ãšltimo Exorcismo", "B) O Exorcista", "C) Requiem", "D) O Ritual"], resposta: "A) O Ãšltimo Exorcismo", explicacao: "Cena final prolongada e intensa." },
        { pergunta: "Em qual filme hÃ¡ uma crianÃ§a possuÃ­da?", opcoes: ["A) O PressÃ¡gio", "B) O Exorcista", "C) A Ã“rfÃ£", "D) HereditÃ¡rio"], resposta: "B) O Exorcista", explicacao: "Regan MacNeil." },
        { pergunta: "Qual filme tem Annabelle como personagem central?", opcoes: ["A) Annabelle Creation", "B) A ConjuraÃ§Ã£o", "C) Annabelle Comes Home", "D) Todas as anteriores"], resposta: "D) Todas as anteriores", explicacao: "Franquia Annabelle." }
      ],
      lendas: [
        { pergunta: "Em qual regiÃ£o a Matinta Pereira Ã© mais conhecida?", opcoes: ["A) Norte e Nordeste", "B) Sul", "C) Sudeste", "D) Centro-Oeste"], resposta: "A) Norte e Nordeste", explicacao: "Lenda amazÃ´nica." },
        { pergunta: "O que acontece se recusar dar algo Ã  Matinta?", opcoes: ["A) Ela deixa presente", "B) Joga praga", "C) Desaparece", "D) Volta amanhÃ£"], resposta: "B) Joga praga", explicacao: "Causa infortÃºnios." },
        { pergunta: "Em que animal a Matinta se transforma?", opcoes: ["A) Gato", "B) Coruja", "C) PÃ¡ssaro", "D) Cachorro"], resposta: "C) PÃ¡ssaro", explicacao: "PÃ¡ssaro noturno." },
        { pergunta: "O que era o MinhocÃ£o?", opcoes: ["A) Minhoca gigante", "B) Peixe", "C) EspÃ­rito", "D) DragÃ£o"], resposta: "A) Minhoca gigante", explicacao: "Criatura subterrÃ¢nea." },
        { pergunta: "Onde o MinhocÃ£o Ã© mais relatado?", opcoes: ["A) ParÃ¡", "B) Bahia", "C) Amazonas", "D) Mato Grosso"], resposta: "D) Mato Grosso", explicacao: "Interior do estado." },
        { pergunta: "Por que o MinhocÃ£o era temido?", opcoes: ["A) Sequestrava crianÃ§as", "B) Causava tremores", "C) Envenenava rios", "D) DestruÃ­a plantaÃ§Ãµes"], resposta: "B) Causava tremores", explicacao: "Movimento causa deslizamentos." },
        { pergunta: "Como a MÃ£e do Ouro aparece?", opcoes: ["A) Cobra dourada", "B) Mulher brilhante", "C) Bola de fogo", "D) Ambas B e C"], resposta: "D) Ambas B e C", explicacao: "Atrai e assusta garimpeiros." },
        { pergunta: "Qual o objetivo da MÃ£e do Ouro?", opcoes: ["A) Proteger ouro da ganÃ¢ncia", "B) Guiar garimpeiros", "C) Ajudar perdidos", "D) Proteger animais"], resposta: "A) Proteger ouro da ganÃ¢ncia", explicacao: "Guarda riquezas naturais." },
        { pergunta: "O que acontece com quem explora sua Ã¡rea?", opcoes: ["A) Fica rico", "B) Desaparece ou Ã© punido", "C) Recebe bÃªnÃ§Ã£o", "D) Fica cego"], resposta: "B) Desaparece ou Ã© punido", explicacao: "Castigo pela cobiÃ§a." },
        { pergunta: "Como a Iara Ã© descrita?", opcoes: ["A) Sereia amazÃ´nica", "B) Mulher com asas", "C) Velha em cavernas", "D) EspÃ­rito invisÃ­vel"], resposta: "A) Sereia amazÃ´nica", explicacao: "Metade mulher, metade peixe." },
        { pergunta: "O que a Iara faz com homens?", opcoes: ["A) Encanta e afoga", "B) DÃ¡ tesouro", "C) Transforma em peixe", "D) DÃ¡ conselhos"], resposta: "A) Encanta e afoga", explicacao: "Seduz com canto." },
        { pergunta: "Onde a Iara vive?", opcoes: ["A) Rios e igarapÃ©s", "B) Ãrvores", "C) Montanhas", "D) Cavernas"], resposta: "A) Rios e igarapÃ©s", explicacao: "Ãguas doces." },
        { pergunta: "AparÃªncia do Saci-PererÃª?", opcoes: ["A) Menino de uma perna sÃ³", "B) Velho barbudo", "C) Mulher cabelos longos", "D) Animal"], resposta: "A) Menino de uma perna sÃ³", explicacao: "Com gorro vermelho." },
        { pergunta: "O que o Curupira protege?", opcoes: ["A) Animais e Ã¡rvores", "B) Rios", "C) Tesouros", "D) CrianÃ§as"], resposta: "A) Animais e Ã¡rvores", explicacao: "GuardiÃ£o da floresta." },
        { pergunta: "Como o BoitatÃ¡ aparece?", opcoes: ["A) Cobra de fogo", "B) Vento", "C) Risadas", "D) Sombra"], resposta: "A) Cobra de fogo", explicacao: "Protetor contra incÃªndios." }
      ],
      creepypasta: [
        { pergunta: "Jeff The Killer e Liu sÃ£o o que?", opcoes: ["A) Casal", "B) IrmÃ£os", "C) Rivais"], resposta: "B) IrmÃ£os", explicacao: "IrmÃ£os na lore original." },
        { pergunta: "RelaÃ§Ã£o de Jane e Jeff?", opcoes: ["A) Amor", "B) Ã“dio", "C) Amigos"], resposta: "B) Ã“dio", explicacao: "Jane quer vinganÃ§a." },
        { pergunta: "Principais proxies do Slenderman?", opcoes: ["A) Masky, Hoodie, Ticci Toby", "B) Jeff, Ben, Nina", "C) Nenhum"], resposta: "A) Masky, Hoodie, Ticci Toby", explicacao: "Proxies clÃ¡ssicos." },
        { pergunta: "Nome verdadeiro do Bloody Painter?", opcoes: ["A) Helen Otis", "B) Jack Dahnmer", "C) Timothy Wright"], resposta: "A) Helen Otis", explicacao: "Helen Ã© o nome real." },
        { pergunta: "Sally foi morta por quem?", opcoes: ["A) Tio", "B) Pai", "C) Prima"], resposta: "A) Tio", explicacao: "Abusada e morta pelo tio." },
        { pergunta: "Primeira vÃ­tima de Jeff?", opcoes: ["A) Gato", "B) Homem", "C) Isaac"], resposta: "A) Gato", explicacao: "ComeÃ§ou com animais." },
        { pergunta: "Sam e Sally sÃ£o o que?", opcoes: ["A) IrmÃ£os", "B) Rivais", "C) Primos"], resposta: "A) IrmÃ£os", explicacao: "IrmÃ£os na lore." },
        { pergunta: "Frase clÃ¡ssica de Jeff?", opcoes: ["A) Go to sleep", "B) Sweet dreams", "C) Night night"], resposta: "A) Go to sleep", explicacao: "Frase icÃ´nica." },
        { pergunta: "Ben Drowned estÃ¡ ligado a qual jogo?", opcoes: ["A) Majora's Mask", "B) Free Fire", "C) Minecraft"], resposta: "A) Majora's Mask", explicacao: "Cartridge amaldiÃ§oado." },
        { pergunta: "Zalgo Ã© o que de Lazari?", opcoes: ["A) Pai", "B) IrmÃ£o", "C) Nada"], resposta: "A) Pai", explicacao: "Zalgo Ã© o pai dela." },
        { pergunta: "Frase da Clockwork?", opcoes: ["A) Your time is up", "B) Go to sleep", "C) Nenhuma"], resposta: "A) Your time is up", explicacao: "Frase assinatura." },
        { pergunta: "Arma de Ticci Toby?", opcoes: ["A) Machado", "B) Faca", "C) Martelo"], resposta: "A) Machado", explicacao: "Armas duplas." },
        { pergunta: "Nome real de Hoodie?", opcoes: ["A) Brian Thomas", "B) Timothy Wright", "C) Tobias Rogers"], resposta: "A) Brian Thomas", explicacao: "Brian Thomas." },
        { pergunta: "Ticci Toby tem tiques?", opcoes: ["A) Sim", "B) NÃ£o", "C) SÃ³ em estresse"], resposta: "A) Sim", explicacao: "Tourette na lore." },
        { pergunta: "Eyeless Jack come o que?", opcoes: ["A) Rins", "B) CoraÃ§Ãµes", "C) FÃ­gado"], resposta: "A) Rins", explicacao: "Come rins humanos." }
      ]
    };

    let nome, tema, numPerguntas, quizPerguntas = [], currentQuestion = 0, score = 0;

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function iniciarQuiz() {
      nome = document.getElementById('nome').value.trim() || "Alma Perdida";
      tema = document.getElementById('tema').value;
      numPerguntas = parseInt(document.getElementById('qtd').value);

      let todas = tema === 'misto' ? [...perguntas.filmes, ...perguntas.lendas, ...perguntas.creepypasta] : (perguntas[tema] || []);
      quizPerguntas = shuffle(todas).slice(0, numPerguntas);

      if (quizPerguntas.length < numPerguntas) {
        alert(`NÃ£o hÃ¡ perguntas suficientes para ${numPerguntas} no tema escolhido. Escolha "Misto" ou diminua o nÃºmero.`);
        return;
      }

      document.getElementById('landing').style.display = 'none';
      document.getElementById('quiz-section').style.display = 'flex';
      document.getElementById('quiz-title').textContent = `Ceifando ${numPerguntas} Almas â€“ Tema: ${tema.toUpperCase()}`;
      
      if (!muted) bgSound.play().catch(()=>{});
      mostrarPergunta();
    }

    function mostrarPergunta() {
      if (currentQuestion >= quizPerguntas.length) return finalizarQuiz();
      
      const q = quizPerguntas[currentQuestion];
      document.getElementById('pergunta').textContent = q.pergunta;
      const ops = document.getElementById('opcoes');
      ops.innerHTML = '';
      q.opcoes.forEach(op => {
        const div = document.createElement('div');
        div.className = 'option';
        div.textContent = op;
        div.onclick = () => verificarResposta(op);
        ops.appendChild(div);
      });
    }

    function verificarResposta(escolhida) {
      const q = quizPerguntas[currentQuestion];
      if (escolhida === q.resposta) {
        score++;
        document.getElementById('score').textContent = `Almas Ceifadas: ${score}`;
        if (!muted) correctSound.play().catch(()=>{});
        currentQuestion++;
        mostrarPergunta();
      } else {
        if (!muted) errorSound.play().catch(()=>{});
        document.getElementById('error-msg').style.display = 'block';
        setTimeout(() => document.getElementById('error-msg').style.display = 'none', 2500);
        document.getElementById('balloon-text').textContent = `A correta era: \( {q.resposta}\n \){q.explicacao}`;
        document.getElementById('balloon').style.display = 'block';
      }
    }

    function finalizarQuiz() {
      document.getElementById('quiz-section').style.display = 'none';
      document.getElementById('end-section').style.display = 'flex';
      bgSound.pause();

      let msg = `VocÃª ceifou ${score} de ${quizPerguntas.length} almas! `;
      if (score > quizPerguntas.length * 0.75) msg += "Ceifador lendÃ¡rio! ðŸ’€";
      else if (score > quizPerguntas.length * 0.4) msg += "Alma resistente... por enquanto ðŸ˜ˆ";
      else msg += "Sua alma foi ceifada fÃ¡cil demais... ðŸª¦";
      document.getElementById('resultado').textContent = msg;

      let ranking = JSON.parse(localStorage.getItem('rankingCeifador') || '[]');
      ranking.push({nome, score, total: quizPerguntas.length, tema});
      ranking.sort((a,b) => b.score - a.score);
      ranking = ranking.slice(0,10);
      localStorage.setItem('rankingCeifador', JSON.stringify(ranking));

      let html = '<h2>Hall das Almas Ceifadas ðŸ’€</h2><ol>';
      ranking.forEach(r => {
        html += `<li>${r.nome} â€“ \( {r.score}/ \){r.total} (${r.tema})</li>`;
      });
      html += '</ol>';
      document.getElementById('ranking').innerHTML = html;
    }

    async function compartilharResultado() {
      const texto = `Ceifei ${score} de \( {quizPerguntas.length} almas no Quiz Ceifador ( \){tema})! ðŸ’€ E vocÃª, aguenta? Tente aqui: https://sillviojb-ship-it.github.io/dimensao-fantasma/`;
      if (navigator.share) {
        try {
          await navigator.share({title: "Minha CeifanÃ§a", text: texto, url: location.href});
        } catch(e) {
          navigator.clipboard.writeText(texto);
          alert("Compartilhamento ca