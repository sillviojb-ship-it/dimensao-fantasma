<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz Ceifador ðŸ’€ â€“ DimensÃ£o do Terror</title>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Special+Elite&display=swap" rel="stylesheet">
  <style>
    body {
      background: #000 url('https://images.unsplash.com/photo-1507499739999-097706ad8914?auto=format&fit=crop&q=80') center/cover fixed;
      color: #ffcccc; font-family: 'Special Elite', cursive; margin: 0; padding: 0; overflow-x: hidden; min-height: 100vh; position: relative;
    }
    body::before { content: ''; position: absolute; inset: 0; background: linear-gradient(rgba(0,0,0,0.8), rgba(80,0,0,0.4)); z-index: 1; }
    .container { position: relative; z-index: 2; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; text-align: center; }
    h1 { font-family: 'Creepster', cursive; font-size: clamp(3rem, 10vw, 7rem); color: #ff1a1a; text-shadow: 0 0 30px #8b0000; margin: 0 0 1.5rem 0; }
    input, select, button { width: 100%; max-width: 450px; padding: 1.2rem; margin: 0.5rem 0; font-size: 1.1rem; background: rgba(30,0,0,0.8); border: 2px solid #8b0000; color: #ffcccc; border-radius: 10px; font-family: inherit; }
    button { background: linear-gradient(45deg, #4b0000, #8b0000); cursor: pointer; border: none; font-weight: bold; transition: 0.3s; }
    button:hover { transform: scale(1.05); box-shadow: 0 0 20px #ff0000; }
    .option { width: 100%; max-width: 450px; padding: 1.2rem; background: rgba(40,0,0,0.8); border: 2px solid #8b0000; margin: 0.5rem 0; cursor: pointer; border-radius: 8px; }
    .option:hover { border-color: #ff1a1a; background: rgba(60,0,0,0.9); }
    #quiz-section, #end-section, #balloon { display: none; }
    #balloon { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(60,0,0,0.98); padding: 2rem; border-radius: 15px; border: 2px solid #ff0000; z-index: 100; text-align: center; width: 85%; max-width: 400px; box-shadow: 0 0 50px #000; }
    #mute-btn { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: #ffcccc; font-size: 2rem; cursor: pointer; z-index: 10; }
  </style>
</head>
<body>

  <button id="mute-btn" onclick="toggleMute()">ðŸ”Š</button>

  <div class="container" id="landing">
    <h1>Quiz Ceifador ðŸ’€</h1>
    <input type="text" id="nome" placeholder="Teu nome, Alma Perdida..." maxlength="30">
    <select id="tema">
      <option value="filmes">Filmes de Terror</option>
      <option value="lendas">Lendas Urbanas</option>
      <option value="creepypasta">Creepypastas</option>
      <option value="misto">Misto (Tudo!)</option>
    </select>
    <select id="qtd">
      <option value="10">10 perguntas</option>
      <option value="15" selected>15 perguntas</option>
      <option value="20">20 perguntas</option>
    </select>
    <button onclick="iniciarQuiz()">Entrar no Abismo</button>
  </div>

  <div class="container" id="quiz-section">
    <h1 id="quiz-title" style="font-size: 2rem;"></h1>
    <div id="pergunta" style="font-size:1.5rem; margin:1.5rem 0; min-height: 80px;"></div>
    <div id="opcoes"></div>
    <div id="score" style="margin-top: 20px; color: #ff0000; font-weight: bold;">Almas Ceifadas: 0</div>
  </div>

  <div class="container" id="end-section">
    <h1>Fim da CeifanÃ§a ðŸ’€</h1>
    <div id="resultado" style="font-size:1.5rem; margin-bottom: 2rem;"></div>
    <div id="ranking" style="background: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px; border: 1px solid #8b0000; width: 100%; max-width: 400px; margin-bottom: 1rem;"></div>
    <button onclick="compartilharResultado()">Compartilhar CeifanÃ§a</button>
    <button onclick="location.reload()">Tentar Novamente</button>
  </div>

  <div id="balloon">
    <p id="balloon-text" style="font-size: 1.2rem;"></p>
    <button onclick="proximaPergunta()">Continuar</button>
  </div>

  <script>
    const perguntas = {
      filmes: [
        { pergunta: "Quem possui a garota do exorcista?", opcoes: ["A) Pazuzu", "B) Embora", "C) Cairne", "D) Belzebu"], resposta: "A) Pazuzu", explicacao: "Pazuzu Ã© o demÃ´nio antigo que possui Regan." },
        { pergunta: "Qual filme apresenta a boneca Annabelle?", opcoes: ["A) A ConjuraÃ§Ã£o", "B) Annabelle", "C) Insidioso", "D) A Freira"], resposta: "B) Annabelle", explicacao: "Annabelle Ã© a boneca da franquia InvocaÃ§Ã£o do Mal." }
      ],
      lendas: [
        { pergunta: "Onde a Matinta Pereira Ã© mais conhecida?", opcoes: ["A) Norte/Nordeste", "B) Sul", "C) Sudeste"], resposta: "A) Norte/Nordeste", explicacao: "Ã‰ uma lenda clÃ¡ssica da AmazÃ´nia." }
      ],
      creepypasta: [
        { pergunta: "Qual a frase clÃ¡ssica de Jeff The Killer?", opcoes: ["A) Go to sleep", "B) Sweet dreams", "C) Die now"], resposta: "A) Go to sleep", explicacao: "Ele diz isso antes de atacar as vÃ­timas." }
      ]
    };

    let nome, tema, numPerguntas, listaFinal = [], index = 0, pontos = 0, somAtivo = true;

    function toggleMute() {
        somAtivo = !somAtivo;
        document.getElementById('mute-btn').textContent = somAtivo ? 'ðŸ”Š' : 'ðŸ”‡';
    }

    function iniciarQuiz() {
      nome = document.getElementById('nome').value || "Alma Perdida";
      tema = document.getElementById('tema').value;
      numPerguntas = parseInt(document.getElementById('qtd').value);
      
      let base = tema === 'misto' ? [...perguntas.filmes, ...perguntas.lendas, ...perguntas.creepypasta] : (perguntas[tema] || []);
      listaFinal = base.sort(() => Math.random() - 0.5).slice(0, numPerguntas);

      document.getElementById('landing').style.display = 'none';
      document.getElementById('quiz-section').style.display = 'flex';
      mostrar();
    }

    function mostrar() {
      if (index >= listaFinal.length) return finalizar();
      const q = listaFinal[index];
      document.getElementById('pergunta').textContent = q.pergunta;
      const box = document.getElementById('opcoes');
      box.innerHTML = '';
      q.opcoes.forEach(op => {
        const btn = document.createElement('div');
        btn.className = 'option';
        btn.textContent = op;
        btn.onclick = () => checar(op);
        box.appendChild(btn);
      });
    }

    function checar(escolha) {
      const q = listaFinal[index];
      if(escolha === q.resposta) {
        pontos++;
        document.getElementById('score').textContent = `Almas Ceifadas: ${pontos}`;
        index++;
        mostrar();
      } else {
        document.getElementById('balloon-text').innerHTML = `ERRASTE!<br><small>A correta era: ${q.resposta}</small><br><br>${q.explicacao}`;
        document.getElementById('balloon').style.display = 'block';
      }
    }

    function proximaPergunta() {
      document.getElementById('balloon').style.display = 'none';
      index++;
      mostrar();
    }

    function finalizar() {
      document.getElementById('quiz-section').style.display = 'none';
      document.getElementById('end-section').style.display = 'flex';
      document.getElementById('resultado').textContent = `${nome}, ceifaste ${pontos} de ${listaFinal.length} almas!`;
      
      let rk = JSON.parse(localStorage.getItem('ceifador_rank') || '[]');
      rk.push({n: nome, p: pontos});
      rk.sort((a,b) => b.p - a.p);
      localStorage.setItem('ceifador_rank', JSON.stringify(rk.slice(0,5)));
      
      let h = "<h3>RANKING DAS ALMAS</h3>";
      rk.slice(0,5).forEach((u, i) => h += `<p>${i+1}Âº ${u.n} - ${u.p} pts</p>`);
      document.getElementById('ranking').innerHTML = h;
    }

    function compartilharResultado() {
      const t = `Ceifei ${pontos} almas no Quiz Ceifador! Aguentas o desafio?`;
      if (navigator.share) {
        navigator.share({ title: 'Quiz Ceifador', text: t, url: window.location.href });
      } else {
        alert("Copiado: " + t);
      }
    }
  </script>
</body>
</html>
